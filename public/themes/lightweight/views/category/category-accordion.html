<script type="text/ng-template" id="categoryTree">

    <span data-ng-if="category.subCategories.length > 0" class="pull-right" data-ng-click="toggleCategory(category)">
        <i class="fa" data-ng-class="{'fa-minus': category.isOpen, 'fa-plus': !category.isOpen}"></i>
    </span>

    <a data-ng-class="{'selected-nav-category': (category.isOpen)}" data-ui-sref="Category({slug:category.slug})">{{category.name}}</a>

    <ul ng-if="category.subCategories" id="{{category.slug}}" data-ng-show="category.isOpen">
        <li ng-repeat="category in category.subCategories" ng-include="'categoryTree'">
        </li>
    </ul>

</script>

<div>
    <h2>Category</h2>
    <div class="category-products">
        <ul>
            <li ng-repeat="category in categories" ng-include="'categoryTree'"></li>
        </ul>
    </div>
</div>
